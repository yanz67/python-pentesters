#!/usr/bin/env python

import socketserver


class EchoHandler(socketserver.BaseRequestHandler):
    def handle(self) -> None:
        print(f'Received connection from: {self.client_address}')
        data = 'hello world'
        while len(data):
            data = self.request.recv(1024)
            print(data.decode('utf-8'))
            self.request.send(data)

        print('client disconnected')


if __name__ == '__main__':
    server_addr = ('0.0.0.0', 9000)
    server = socketserver.TCPServer(server_addr, EchoHandler)
    server.serve_forever()
