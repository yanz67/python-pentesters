#!/usr/bin/env python3

import socketserver
from http.server import SimpleHTTPRequestHandler
from http import HTTPStatus


class HttpRequestHandler(SimpleHTTPRequestHandler):
    def do_GET(self) -> None:
        if self.path == '/admin':
            self.send_response(HTTPStatus.OK)
            for key, value in self.headers.items():
                print(f'key: {key}, value: {value}')
                self.send_header(key, value)
            self.end_headers()
            self.wfile.write(bytes("<html><body><h1>Hello World</h1></body></html>", "utf-8"))
            self.close_connection = True
        else:
            SimpleHTTPRequestHandler.do_GET(self)


if __name__ == '__main__':
    socketserver.TCPServer.allow_reuse_address = True
    http_server = socketserver.TCPServer(("", 10001), HttpRequestHandler)
    try:
        http_server.serve_forever()
    except KeyboardInterrupt:
        print('closing server')
        http_server.server_close()
