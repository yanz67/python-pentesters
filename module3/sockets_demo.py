#!/usr/bin/env python3

import socket

tcpSocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)

# Set the socket to be available for reuse quicker
tcpSocket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)

tcpSocket.bind(('0.0.0.0', 8000))
tcpSocket.listen(2)
print('Waiting for a client...')
(client, (ip, sock)) = tcpSocket.accept()

print(f'Received connection from: {ip} client: {client}')
print('Starting ECHO output')

data = 'dummy'

while len(data):
    data = client.recv(2048)
    print(f'client sent: {data}')
    client.send(data)

print("closing connection")
client.close()
